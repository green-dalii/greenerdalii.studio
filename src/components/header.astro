---
import NavContent from "./nav-content.astro";
import { getLangFromUrl, useTranslations } from '../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<NavContent />
<script>
  // import MicroModal from "micromodal";
  import invariant from "tiny-invariant";

  const header = document.querySelector("#page-header") as HTMLElement;
  const page = document.documentElement;
  const dropmenu = document.querySelector("#dropmenu")


  invariant(header, "header should not be null");
  invariant(dropmenu, "menu should not be null");

  document.addEventListener("scroll", () => {
    const d = page.clientHeight - page.scrollTop - header.offsetHeight;
    header.classList.toggle("fixed-header", d < 0);
    dropmenu.classList.toggle("dropdown-top", d > 0);
  });

  // menu.addEventListener("click", (event) => {
  //   if ((event.target as HTMLElement).tagName === "A") {
  //     closeMenu();
  //   }
  // });
</script>
